name: "get-modified-packages"
description: "Get a list of modified packages"

outputs:
  modified-packages:
    description: "List of modified packages"
    value: ${{ steps.get-modified-packages.outputs.modified-packages }}

runs:
  using: "composite"
  steps:
    - name: Checkout repository
      uses: actions/checkout@v2
      with:
        # Fetch with depth=0 to find modified packages
        fetch-depth: 0

    - name: Get modified packages
      id: get-modified-packages
      run: |
        ${GITHUB_ACTION_PATH}/get-modified-packages.sh origin/${{ github.base_ref }}
      shell: bash

    - name: Show result
      run: |
        echo "modified packages: ${{ steps.get-modified-packages.outputs.modified-packages }}"
      shell: bash
